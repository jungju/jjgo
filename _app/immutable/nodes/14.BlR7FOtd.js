import{b as u,f as M,t as D,d as _t}from"../chunks/Bqpg8iN1.js";import"../chunks/DO6zdA2A.js";import{o as Gt}from"../chunks/CNTnH4U4.js";import{ar as Jt,au as et,t as m,av as Kt,a as t,ap as x,E as f,ao as i,s as a,aq as c,ax as ht}from"../chunks/CA_CyBSM.js";import{e as I,s as g}from"../chunks/B4753DpI.js";import{i as G}from"../chunks/xEsQY-UQ.js";import{e as J,i as K}from"../chunks/BJXE_k9r.js";import{s as O}from"../chunks/C2QHioRD.js";import{i as Lt}from"../chunks/D05j6V-c.js";var Nt=M('<th class="svelte-uncxd8"> </th>'),Rt=M("<td><!></td>"),Ut=M('<tr><td class="svelte-uncxd8"> </td><!></tr>'),Vt=M('<div style="overflow-x:auto"><table class="svelte-uncxd8"><thead><tr><th class="svelte-uncxd8">S</th><!></tr></thead><tbody></tbody></table></div>'),Xt=M('<p style="margin-bottom: 120px;">⬇ 하단 버튼을 눌러 문장을 불러오세요.</p>'),Zt=M("<button> </button>"),te=M('<!> <div class="footer svelte-uncxd8"><button class="info-btn svelte-uncxd8">Info</button> <div style="display:flex; flex-wrap:wrap; gap:5px; justify-content:center;"></div> <div style="display:flex; gap:12px;"><button> </button> <button>Q1</button> <button> </button></div></div>',1);function ie(bt,mt){Jt(mt,!1);let st=f([]),S=f([]),L=[],p=f(""),k=f(""),o,n=f(""),y=f(null),_=f({c:0,t:0}),j=null,l=f(null),w=f(!1),h=f(!1),F=0;const xt=["Present","Past","Future","Present Progressive","Past Progressive","Future Progressive","Present Perfect","Past Perfect","Future Perfect"],gt=["I","You","He","We","They"],N=async e=>{const s=await fetch(e);return s.ok?await s.json():[]};Gt(async()=>{a(st,await N("/assets/tense/info.json")),await Y("sentences1-1.json")});async function Y(e,s){const r=await N(`/assets/tense/${e}`);if(!r.length)return alert(`fail ${e}`);L=await N(`/assets/tense/${e.replace("-1.json","-2.json")}`),a(S,r),a(p,e),a(k,e.replace("sentences","").replace(".json","")),o?.pause(),a(y,null),a(n,""),a(_,{c:0,t:0}),j=null,a(l,null),a(w,!1),a(h,!1)}const kt=e=>(t(w)&&L.length?L:t(S)).slice(e*9,e*9+9);function yt(e){const s=e.replace(/\.$/,"").split(" ");return s.length<3?e:`${s[0]} ${s.slice(1,-1).map(r=>"_".repeat(r.length)).join(" ")} ${s[s.length-1]}`}const wt=e=>{t(n)||!t(k).endsWith("-1")||(o?.pause(),o=new Audio(`/assets/tense/audio/${t(k)}-${e+1}.mp3`),a(y,e),o.onended=()=>a(y,null),o.play().catch(()=>{}))};function at(){if(!t(h)||F>=t(S).length){a(h,!1),a(y,null);return}o?.pause(),o=new Audio(`/assets/tense/audio/${t(k)}-${F+1}.mp3`),a(y,F),o.onended=()=>{F++,at()},o.play().catch(()=>{})}function Pt(){if(t(h)){o?.pause(),a(h,!1),a(y,null);return}t(p).startsWith("tense_info")||t(n)||!t(k).endsWith("-1")||(a(h,!0),F=0,at())}const Wt=()=>{a(n,"blank"),a(l,null)},Mt=()=>{if(t(n)==="guess"){o?.pause(),o&&(o.currentTime=0,o.play().catch(()=>{}));return}a(w,!1),a(n,"guess"),a(_,{c:0,t:0}),nt()};function nt(){a(l,null);const e=Math.floor(Math.random()*5)+1,s=Math.floor(Math.random()*2)+1,r=Math.floor(Math.random()*45)+1;j=r-1,ht(_,t(_).t++),o?.pause(),o=new Audio(`/assets/tense/audio/${e}-${s}-${r}.mp3`),o.play().catch(()=>{})}function $t(e,s){if(t(n)!=="guess"||j===null)return;const r=Math.floor(j/9),d=j%9,P=e===r&&s===d;P&&ht(_,t(_).c++),a(l,{r:e,c:s,x:P,cr:r,cc:d}),setTimeout(nt,800)}Lt();var lt=te(),rt=et(lt);{var qt=e=>{var s=Vt(),r=i(s),d=i(r),P=i(d),Ft=x(i(P));J(Ft,1,()=>xt,K,(U,V)=>{var v=Nt(),Q=i(v,!0);c(v),m(()=>g(Q,t(V))),u(U,v)}),c(P),c(d);var dt=x(d);J(dt,5,()=>gt,K,(U,V,v)=>{var Q=Ut(),X=i(Q),Qt=i(X,!0);c(X);var Tt=x(X);J(Tt,1,()=>kt(v),K,(Et,Z,W)=>{var T=Rt();let pt;var Ht=i(T);{var Ot=b=>{var E=D();m(tt=>g(E,tt),[()=>yt(t(Z))]),u(b,E)},St=b=>{var E=_t(),tt=et(E);{var Yt=q=>{var H=_t(),Bt=et(H);{var Ct=A=>{var C=D();m(()=>g(C,t(Z))),u(A,C)},Dt=A=>{var C=D("?");u(A,C)};G(Bt,A=>{t(l)&&!t(l).x&&t(l).cr===v&&t(l).cc===W?A(Ct):A(Dt,!1)})}u(q,H)},zt=q=>{var H=D();m(()=>g(H,t(Z))),u(q,H)};G(tt,q=>{t(n)==="guess"?q(Yt):q(zt,!1)},!0)}u(b,E)};G(Ht,b=>{t(n)==="blank"?b(Ot):b(St,!1)})}c(T),m(b=>pt=O(T,1,"svelte-uncxd8",null,pt,b),[()=>({click:!t(n)&&t(k).endsWith("-1"),play:!t(n)&&t(y)===v*9+W,blank:t(n)==="blank",ok:t(n)==="guess"&&t(l)?.x&&t(l).r===v&&t(l).c===W,no:t(n)==="guess"&&t(l)&&!t(l).x&&t(l).r===v&&t(l).c===W,ans:t(n)==="guess"&&t(l)&&!t(l).x&&t(l).cr===v&&t(l).cc===W})]),I("click",T,()=>{t(n)?t(n)==="guess"&&$t(v,W):wt(v*9+W)}),u(Et,T)}),c(Q),m(()=>g(Qt,t(V))),u(U,Q)}),c(dt),c(r),c(s),u(e,s)},At=e=>{var s=Xt();u(e,s)};G(rt,e=>{t(S).length?e(qt):e(At,!1)})}var ot=x(rt,2),ct=i(ot),R=x(ct,2);J(R,5,()=>t(st),K,(e,s)=>{var r=Zt();let d;var P=i(r,!0);c(r),m(()=>{d=O(r,1,"svelte-uncxd8",null,d,{active:!t(n)&&t(p)===t(s).file_en,korean:!t(n)&&t(p)===t(s).file_en&&t(w)}),g(P,t(s).base)}),I("click",r,()=>{t(p)===t(s).file_en&&!t(n)?a(w,!t(w)):(a(w,!1),Y(t(s).file_en,t(s).base))}),u(e,r)}),c(R);var ut=x(R,2),$=i(ut);let it;var It=i($,!0);c($);var z=x($,2);let vt;var B=x(z,2);let ft;var jt=i(B,!0);c(B),c(ut),c(ot),m((e,s)=>{$.disabled=e,it=O($,1,"svelte-uncxd8",null,it,{active:t(h)}),g(It,t(h)?"⏸":"▶"),z.disabled=s,vt=O(z,1,"svelte-uncxd8",null,vt,{active:t(n)==="blank"}),ft=O(B,1,"svelte-uncxd8",null,ft,{active:t(n)==="guess"}),g(jt,t(n)==="guess"?`${t(_).c}/${t(_).t}`:"Q2")},[()=>t(p).startsWith("tense_info")||t(n)||!t(k).endsWith("-1"),()=>t(p).startsWith("tense_info")]),I("click",ct,()=>t(p).startsWith("tense_info1")?Y("tense_info2.json"):Y("tense_info1.json")),I("click",$,Pt),I("click",z,Wt),I("click",B,Mt),u(bt,lt),Kt()}export{ie as component};
